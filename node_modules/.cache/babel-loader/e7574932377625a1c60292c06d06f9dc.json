{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/ryan/Music/SantuyApp/src/components/fragment/FooterMusicPlayer.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport '../assets/scss/FooterPlayer.scss';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport RepeatOneIcon from '@material-ui/icons/RepeatOne';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport Slider from \"@material-ui/core/Slider\";\nimport { Avatar } from \"@material-ui/core\";\nimport ControlsToggleButton from \"./ControlsToggleButton\";\nimport Name from \"./Name\";\nimport { ThemeContext } from \"../../api/Theme\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setBannerOpen, setCurrentPlaying } from \"../../actions/actions\";\nimport Button from \"@material-ui/core/Button\";\n\nfunction FooterMusicPlayer({\n  music\n}) {\n  _s();\n\n  const [{\n    id,\n    name,\n    author_name,\n    img,\n    musicName\n  }, setCurrTrack] = useState(music);\n  const [isRepeatClicked, setRepeatClick] = useState(false);\n  const [isPrevClicked, setPrevClicked] = useState(false);\n  const [isNextClicked, setNextClicked] = useState(false);\n  const [isPlaying, setPlayPauseClicked] = useState(false);\n  const [isVolumeClicked, setVolumeClicked] = useState(false);\n  const [volume, setVolume] = useState(50);\n  const [seekTime, setSeekTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [currTime, setCurrTime] = useState(0);\n  const [bannerToggle, setBannerToggle] = useState(false);\n  const audioElement = useRef();\n  const dispatch = useDispatch();\n  const {\n    playlists\n  } = useSelector(state => state.musicReducer);\n  const useStyle = useContext(ThemeContext);\n  const pointer = {\n    cursor: \"pointer\",\n    color: useStyle.theme\n  };\n\n  const handleToggle = (type, val) => {\n    switch (type) {\n      case \"repeat\":\n        setRepeatClick(val);\n        break;\n\n      case \"prev\":\n        setPrevClicked(val);\n        break;\n\n      case \"play-pause\":\n        setPlayPauseClicked(val);\n        break;\n\n      case \"next\":\n        setNextClicked(val);\n        break;\n\n      case \"volume\":\n        setVolumeClicked(val);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const handleSeekChange = (event, newValue) => {\n    audioElement.current.currentTime = newValue * duration / 100;\n    setSeekTime(newValue);\n  };\n\n  const handleVolumeChange = (event, newValue) => {\n    setVolume(newValue);\n  };\n\n  const handleBannerToggle = () => {\n    setBannerToggle(!bannerToggle);\n  };\n\n  useEffect(() => {\n    dispatch(setBannerOpen(bannerToggle));\n  }, [dispatch, bannerToggle]);\n  useEffect(() => {\n    isPlaying ? audioElement.current.play().then(() => {}).catch(e => {\n      audioElement.current.pause();\n      audioElement.current.currentTime = 0;\n    }) : audioElement.current.pause();\n    audioElement.current.loop = isRepeatClicked;\n    audioElement.current.volume = volume / 100;\n    audioElement.current.muted = isVolumeClicked;\n\n    audioElement.current.onloadeddata = () => {\n      if (audioElement.current != null) setDuration(audioElement.current.duration);\n    };\n\n    setInterval(() => {\n      if (audioElement.current !== null) setCurrTime(audioElement.current.currentTime);\n    });\n  });\n  useEffect(() => {\n    setCurrTrack(music);\n  }, [music]);\n  useEffect(() => {\n    setSeekTime(currTime / (duration / 100));\n  }, [currTime, duration]);\n  useEffect(() => {\n    audioElement.current.onended = () => {\n      setNextClicked(true);\n    };\n  });\n  useEffect(() => {\n    if (isNextClicked) {\n      let currTrackId = (id + 1) % playlists.length;\n      dispatch(setCurrentPlaying(playlists[currTrackId]));\n      setNextClicked(false);\n    }\n\n    if (isPrevClicked) {\n      let currTrackId = (id - 1) % playlists.length;\n\n      if (id - 1 < 0) {\n        currTrackId = playlists.length - 1;\n      }\n\n      dispatch(setCurrentPlaying(playlists[currTrackId]));\n      setPrevClicked(false);\n    }\n  }, [dispatch, id, isNextClicked, isPrevClicked, playlists]);\n\n  function formatTime(secs) {\n    const t = new Date(1970, 0, 1);\n    t.setSeconds(secs);\n    let s = t.toTimeString().substr(0, 8);\n    if (secs > 86399) s = Math.floor((t - Date.parse(\"1/1/70\")) / 3600000) + s.substr(2);\n    return s.substring(3);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: useStyle.component,\n    className: \"footer-player\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"playback\",\n      children: !isNaN(seekTime) && /*#__PURE__*/_jsxDEV(Slider, {\n        style: {\n          color: useStyle.theme\n        },\n        className: \"playback-completed\",\n        value: seekTime,\n        onChange: handleSeekChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      startIcon: /*#__PURE__*/_jsxDEV(Avatar, {\n        variant: \"square\",\n        src: require(\"../assets/img/\" + img).default,\n        alt: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 32\n      }, this),\n      onClick: handleBannerToggle,\n      className: \"curr-music-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"curr-music-details\",\n        children: [/*#__PURE__*/_jsxDEV(Name, {\n          name: name,\n          className: \"song-name\",\n          length: name.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Name, {\n          name: author_name,\n          className: \"author-name\",\n          length: author_name.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"playback-controls\",\n      children: [/*#__PURE__*/_jsxDEV(ControlsToggleButton, {\n        style: pointer,\n        type: \"repeat\",\n        defaultIcon: /*#__PURE__*/_jsxDEV(RepeatIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 52\n        }, this),\n        changeIcon: /*#__PURE__*/_jsxDEV(RepeatOneIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 51\n        }, this),\n        onClicked: handleToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ControlsToggleButton, {\n        style: pointer,\n        type: \"prev\",\n        defaultIcon: /*#__PURE__*/_jsxDEV(SkipPreviousIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 52\n        }, this),\n        change: true,\n        Icon: /*#__PURE__*/_jsxDEV(SkipPreviousIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 55\n        }, this),\n        onClicked: handleToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: audioElement,\n        src: require(\"../assets/music/\" + musicName).default,\n        preload: \"metadata\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ControlsToggleButton, {\n        style: pointer,\n        type: \"play-pause\",\n        defaultIcon: /*#__PURE__*/_jsxDEV(PlayArrowIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 52\n        }, this),\n        changeIcon: /*#__PURE__*/_jsxDEV(PauseIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 51\n        }, this),\n        onClicked: handleToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ControlsToggleButton, {\n        style: pointer,\n        type: \"next\",\n        defaultIcon: /*#__PURE__*/_jsxDEV(SkipNextIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 52\n        }, this),\n        changeIcon: /*#__PURE__*/_jsxDEV(SkipNextIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 51\n        }, this),\n        onClicked: handleToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"playback-widgets\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: formatTime(currTime)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this), \"/\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: formatTime(duration)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"slider\",\n        children: /*#__PURE__*/_jsxDEV(Slider, {\n          style: {\n            color: useStyle.theme\n          },\n          value: volume,\n          onChange: handleVolumeChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ControlsToggleButton, {\n        style: pointer,\n        type: \"volume\",\n        defaultIcon: /*#__PURE__*/_jsxDEV(VolumeUpIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 52\n        }, this),\n        changeIcon: /*#__PURE__*/_jsxDEV(VolumeOffIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 51\n        }, this),\n        onClicked: handleToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n}\n\n_s(FooterMusicPlayer, \"ebzKLQ9k43tAsxbB3x6UBb4D8+Y=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = FooterMusicPlayer;\nexport default FooterMusicPlayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"FooterMusicPlayer\");","map":{"version":3,"sources":["/home/ryan/Music/SantuyApp/src/components/fragment/FooterMusicPlayer.jsx"],"names":["React","useContext","useEffect","useRef","useState","RepeatIcon","RepeatOneIcon","SkipPreviousIcon","SkipNextIcon","PlayArrowIcon","PauseIcon","VolumeUpIcon","VolumeOffIcon","Slider","Avatar","ControlsToggleButton","Name","ThemeContext","useDispatch","useSelector","setBannerOpen","setCurrentPlaying","Button","FooterMusicPlayer","music","id","name","author_name","img","musicName","setCurrTrack","isRepeatClicked","setRepeatClick","isPrevClicked","setPrevClicked","isNextClicked","setNextClicked","isPlaying","setPlayPauseClicked","isVolumeClicked","setVolumeClicked","volume","setVolume","seekTime","setSeekTime","duration","setDuration","currTime","setCurrTime","bannerToggle","setBannerToggle","audioElement","dispatch","playlists","state","musicReducer","useStyle","pointer","cursor","color","theme","handleToggle","type","val","handleSeekChange","event","newValue","current","currentTime","handleVolumeChange","handleBannerToggle","play","then","catch","e","pause","loop","muted","onloadeddata","setInterval","onended","currTrackId","length","formatTime","secs","t","Date","setSeconds","s","toTimeString","substr","Math","floor","parse","substring","component","isNaN","require","default"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useRef, useState} from \"react\";\nimport '../assets/scss/FooterPlayer.scss';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport RepeatOneIcon from '@material-ui/icons/RepeatOne';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport Slider from \"@material-ui/core/Slider\";\nimport {Avatar} from \"@material-ui/core\";\nimport ControlsToggleButton from \"./ControlsToggleButton\";\nimport Name from \"./Name\";\nimport {ThemeContext} from \"../../api/Theme\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setBannerOpen, setCurrentPlaying} from \"../../actions/actions\";\nimport Button from \"@material-ui/core/Button\";\n\nfunction FooterMusicPlayer({music}) {\n\n    const [{id, name, author_name, img, musicName}, setCurrTrack] = useState(music);\n    const [isRepeatClicked, setRepeatClick] = useState(false);\n    const [isPrevClicked, setPrevClicked] = useState(false);\n    const [isNextClicked, setNextClicked] = useState(false);\n    const [isPlaying, setPlayPauseClicked] = useState(false);\n    const [isVolumeClicked, setVolumeClicked] = useState(false);\n    const [volume, setVolume] = useState(50);\n    const [seekTime, setSeekTime] = useState(0);\n    const [duration, setDuration] = useState(0);\n    const [currTime, setCurrTime] = useState(0);\n    const [bannerToggle,setBannerToggle] = useState(false);\n\n    const audioElement = useRef();\n    const dispatch = useDispatch();\n    const {playlists} = useSelector(state => state.musicReducer);\n    const useStyle = useContext(ThemeContext);\n    const pointer = { cursor: \"pointer\",  color: useStyle.theme };\n\n    const handleToggle = (type, val) => {\n        switch (type) {\n            case \"repeat\":\n                setRepeatClick(val);\n                break;\n            case \"prev\":\n                setPrevClicked(val);\n                break;\n            case \"play-pause\":\n                setPlayPauseClicked(val);\n                break;\n            case \"next\":\n                setNextClicked(val);\n                break;\n            case \"volume\":\n                setVolumeClicked(val);\n                break;\n            default:\n                break;\n        }\n    };\n    const handleSeekChange = (event, newValue) => {\n        audioElement.current.currentTime =(newValue*duration)/100;\n        setSeekTime(newValue)\n    };\n    const handleVolumeChange = (event, newValue) => {\n        setVolume(newValue);\n    };\n    const handleBannerToggle = ()=> {\n        setBannerToggle(!bannerToggle);\n    };\n\n\n    useEffect(()=>{\n        dispatch(setBannerOpen(bannerToggle));\n    },[dispatch,bannerToggle]);\n\n\n    useEffect(() => {\n        isPlaying\n            ? audioElement.current.play().then(()=>{}).catch((e)=>{audioElement.current.pause(); audioElement.current.currentTime=0;})\n            : audioElement.current.pause();\n        audioElement.current.loop = isRepeatClicked;\n        audioElement.current.volume = volume / 100;\n        audioElement.current.muted = isVolumeClicked;\n        audioElement.current.onloadeddata = () => {\n            if (audioElement.current != null)\n                setDuration(audioElement.current.duration)\n        };\n        setInterval(() => {\n            if (audioElement.current !== null)\n                setCurrTime(audioElement.current.currentTime);\n        })\n    });\n\n    useEffect(() => {\n        setCurrTrack(music);\n    }, [music]);\n\n\n    useEffect(() => {\n        setSeekTime((currTime) / (duration / 100))\n    }, [currTime, duration]);\n\n\n\n    useEffect(()=>{\n        audioElement.current.onended = ()=> {\n            setNextClicked(true);\n        };\n    })\n\n    useEffect(()=>{\n        if (isNextClicked){\n            let currTrackId = (id+1) % playlists.length;\n            dispatch(setCurrentPlaying(playlists[currTrackId]));\n            setNextClicked(false);\n        }\n        if (isPrevClicked){\n            let currTrackId = (id-1) % playlists.length;\n            if ((id-1)<0){\n                currTrackId = playlists.length - 1;\n            }\n            dispatch(setCurrentPlaying(playlists[currTrackId]));\n            setPrevClicked(false);\n        }\n    },[dispatch, id, isNextClicked, isPrevClicked, playlists]);\n\n\n    function formatTime(secs) {\n        const t = new Date(1970, 0, 1);\n        t.setSeconds(secs);\n        let s = t.toTimeString().substr(0, 8);\n        if (secs > 86399)\n            s = Math.floor((t - Date.parse(\"1/1/70\")) / 3600000) + s.substr(2);\n        return s.substring(3);\n    }\n    return (\n        <div style={useStyle.component} className={\"footer-player\"}>\n            <div className=\"playback\">\n                {\n                    !isNaN(seekTime) &&\n                    <Slider style={{color: useStyle.theme}}\n                            className={\"playback-completed\"}\n                            value={seekTime} onChange={handleSeekChange}/>\n                }\n            </div>\n            <Button\n                    startIcon={<Avatar variant=\"square\" src={require(\"../assets/img/\" + img).default} alt={name}/>}\n                    onClick={handleBannerToggle}\n                    className=\"curr-music-container\">\n                <div className=\"curr-music-details\">\n                    <Name name={name} className={\"song-name\"} length={name.length}/>\n                    <Name name={author_name} className={\"author-name\"}\n                          length={author_name.length}/>\n                </div>\n            </Button>\n            <div className=\"playback-controls\">\n\n                <ControlsToggleButton style={pointer} type={\"repeat\"}\n                                      defaultIcon={<RepeatIcon fontSize={\"large\"}/>}\n                                      changeIcon={<RepeatOneIcon fontSize={\"large\"}/>}\n                                      onClicked={handleToggle}/>\n\n                <ControlsToggleButton style={pointer} type={\"prev\"}\n                                      defaultIcon={<SkipPreviousIcon fontSize={\"large\"}/>}\n                                      change    Icon={<SkipPreviousIcon fontSize={\"large\"}/>}\n                                      onClicked={handleToggle}/>\n\n                <audio ref={audioElement} src={require(\"../assets/music/\" + musicName).default} preload={\"metadata\"}/>\n\n                <ControlsToggleButton style={pointer} type={\"play-pause\"}\n                                      defaultIcon={<PlayArrowIcon fontSize={\"large\"}/>}\n                                      changeIcon={<PauseIcon fontSize={\"large\"}/>}\n                                      onClicked={handleToggle}/>\n\n\n                <ControlsToggleButton style={pointer} type={\"next\"}\n                                      defaultIcon={<SkipNextIcon fontSize={\"large\"}/>}\n                                      changeIcon={<SkipNextIcon fontSize={\"large\"}/>}\n                                      onClicked={handleToggle}/>\n            </div>\n            <div className=\"playback-widgets\">\n                <div className=\"timer\">\n                    <p>\n                        <span>{formatTime(currTime)}</span>\n                        /\n                        <span>{formatTime(duration)}</span>\n                    </p>\n                </div>\n                <div className={\"slider\"}>\n                    <Slider style={{color: useStyle.theme}} value={volume} onChange={handleVolumeChange}/>\n                </div>\n                <ControlsToggleButton style={pointer} type={\"volume\"}\n                                      defaultIcon={<VolumeUpIcon/>}\n                                      changeIcon={<VolumeOffIcon/>}\n                                      onClicked={handleToggle}/>\n            </div>\n        </div>\n\n    );\n}\n\nexport default FooterMusicPlayer;"]},"metadata":{},"sourceType":"module"}